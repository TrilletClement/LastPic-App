<ion-content [fullscreen]="true" class="simple-stories-content">
  <!-- Stories Row -->
  <div class="stories-container">
    <div class="stories-scroll" [class.has-selection]="selectedStory">
      
      <!-- Stories normales -->
      <div class="story-item" 
           *ngFor="let story of stories" 
           [class.selected]="selectedStory?.id === story.id"
           [class.centered]="selectedStory?.id === story.id"
           (click)="selectStory(story)">
        <div class="story-avatar" [class.has-content]="story.hasContent">
          <img [src]="story.avatar" [alt]="story.username">
          <div class="story-ring"></div>
          
          <!-- Compteur de contenu -->
          <div class="content-count" *ngIf="story.contentCount > 0">
            {{ story.contentCount }}
          </div>
          
          <!-- Indicateur d'ajout -->
          <div class="add-indicator" *ngIf="selectedStory?.id === story.id">
            <ion-icon name="camera"></ion-icon>
          </div>
        </div>
        <span class="story-username">{{ story.username }}</span>
      </div>
    </div>
  </div>

  <!-- Zone d'ajout de photo (quand une story est sélectionnée) -->
  <div class="photo-add-section" *ngIf="selectedStory">
    <div class="selected-story-info">
      <h3>Ajouter à {{ selectedStory.username }}</h3>
    </div>
    
    <div class="camera-area" (click)="openCamera()">
      <div class="camera-placeholder" *ngIf="!cameraStream && !capturedPhoto">
        <ion-icon name="camera"></ion-icon>
        <p>Touchez pour prendre une photo</p>
      </div>
      
      <!-- Stream caméra -->
      <video #videoElement 
             class="camera-stream" 
             [style.display]="cameraStream ? 'block' : 'none'" 
             autoplay 
             playsinline>
      </video>
      
      <!-- Photo capturée -->
      <img [src]="capturedPhoto" 
           *ngIf="capturedPhoto && !cameraStream" 
           class="captured-photo" 
           alt="Photo capturée">
    </div>

    <!-- Contrôles caméra -->
    <div class="camera-controls" *ngIf="cameraStream">
      <ion-button class="capture-btn" (click)="capturePhoto()" fill="clear">
        <div class="capture-circle"></div>
      </ion-button>
      <ion-button class="close-btn" (click)="closeCamera()" fill="clear">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </div>

    <!-- Actions photo -->
    <div class="photo-actions" *ngIf="capturedPhoto && !cameraStream">
      <ion-button (click)="retakePhoto()" fill="outline" color="medium">
        <ion-icon name="refresh"></ion-icon>
        Reprendre
      </ion-button>
      <ion-button (click)="addToStory()" fill="solid" color="primary">
        <ion-icon name="add"></ion-icon>
        Ajouter à la story
      </ion-button>
    </div>
  </div>

  <!-- Message quand aucune story sélectionnée -->
  <div class="no-selection" *ngIf="!selectedStory">
    <ion-icon name="images"></ion-icon>
    <h3>Sélectionnez une story</h3>
    <p>Choisissez une story en haut pour commencer à ajouter du contenu</p>
  </div>
</ion-content>